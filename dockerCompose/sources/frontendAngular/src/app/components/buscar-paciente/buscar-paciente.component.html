<app-nav></app-nav>

<div class="container">
  <div class="content-header">
    <h2>Buscar Paciente</h2>
  </div>

  <div class="content-body">
    <div class="search-container">
      <div class="input-group">
        <input
          type="text"
          class="form-control"
          placeholder="DNI o nombre"
          [(ngModel)]="terminoBusqueda"
        />
        <button class="btn" type="button" (click)="buscarPaciente()">
          Buscar
        </button>
      </div>
    </div>

    <div *ngIf="cargando" class="text-center my-4">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-2">Buscando pacientes...</p>
    </div>

    <div *ngIf="mensajeError" class="alert alert-danger">
      {{ mensajeError }}
    </div>

    <div *ngIf="pacientes.length > 0 && !cargando" class="patient-list">
      <div class="patient-card" *ngFor="let paciente of pacientes">
        <div class="patient-info">
          <span class="patient-dni">{{ paciente.dni }} - </span>
          <span class="patient-name">{{ paciente.nombre }}</span>
        </div>
        <div class="patient-actions">
          <button class="btn" (click)="verDetallesPaciente(paciente.id)">Ver más</button>
        </div>
      </div>
    </div>

    <div *ngIf="pacientes.length === 0 && !cargando && !mensajeError" class="alert alert-info">
      No se encontraron pacientes que coincidan con la búsqueda.
    </div>
  </div>
</div>
